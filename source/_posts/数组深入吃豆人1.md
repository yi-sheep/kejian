---
title: 数组深入吃豆人1
date: 2022-06-07 10:58:14
tags: [教材,数组深入] 
categories: c++
---

# 吃豆人1

## 画地图

```c++
string a[20][21] = {
	{"■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","◆","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","○","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","  ","■"},
	{"■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■","■"},
};
```

地图比较大，要注意的是`■`在控制台中 高为1 宽为2

定点打印地图，地图上大部分是不动的，对于没有移动的我们不需要去更新它。

获取控制台输出权限

```c++
// 获取控制台输出权限
HANDLE hout = GetStdHandle(STD_OUTPUT_HANDLE);
```

移动光标

```c++
/// <summary>
/// 移动光标
/// </summary>
/// <param name="x"></param>
/// <param name="y"></param>
void gotoxy(short x,short y) {
	// 将光标移动到指定的位置
	SetConsoleCursorPosition(hout, { x,y });
}
```

打印地图

```c++
/// <summary>
/// 打印地图
/// </summary>
void showMap() {
	short k = 0;
	for (i = 0; i < 20; i++) {
		for (j = 0; j < 21; j++) {
			gotoxy(k, i);
			k += 2;
			cout << a[i][j];
		}
		k = 0;
		cout << endl;
	}
	cout << "成绩：" << result;
}
```

主函数

```c++
int main()
{
	showMap();
	while (true)
	{
		
	}
}
```

隐藏光标，实现更加投入的游戏体验

```c++
//隐藏光标
void HideCursor()
{
	HANDLE handle = GetStdHandle(STD_OUTPUT_HANDLE);
	CONSOLE_CURSOR_INFO CursorInfo;
	GetConsoleCursorInfo(handle, &CursorInfo);//获取控制台光标信息
	CursorInfo.bVisible = false; //隐藏控制台光标
	SetConsoleCursorInfo(handle, &CursorInfo);//设置控制台光标状态
}
```

移动人物

因为打印地图是根据二维数组来画的，所以移动只需要改变二维数组的值就行。

```c++
/// <summary>
/// 移动
/// </summary>
void move() {
    switch (_getch())
    {
        case 'w':
            a[x][y] = "  ";
            a[--x][y] = "○";
            break;
        case 's':
            a[x][y] = "  ";
            a[++x][y] = "○";
            break;
        case 'a':
            a[x][y] = "  ";
            a[x][--y] = "○";
            break;
        case 'd':
            a[x][y] = "  ";
            a[x][++y] = "○";
            break;
        default:
            break;
    }
    showMap();
}
```

